import{g as n}from"./Dx1qNJym.js";import{ag as s}from"./BmXvJSi1.js";const r=s(null);if(typeof localStorage<"u"){const t=localStorage.getItem("nostr_pubkey");t&&r.set(JSON.parse(t))}async function c(){var t;if(!window.nostr||!window.nostr.getPublicKey){alert("Nostr extension not available");return}try{const e=await((t=window.nostr)==null?void 0:t.getPublicKey());let o=await n({kinds:[0],authors:[e]});o={...JSON.parse(o.content),pubkey:o.pubkey},localStorage.setItem("nostr_pubkey",JSON.stringify(o)),r.set(o)}catch(e){console.error("Nostr login failed:",e)}}function u(){localStorage.removeItem("nostr_pubkey"),r.set(null)}export{c as a,u as l,r as n};
