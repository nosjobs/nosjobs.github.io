import{f as P,e as nt,a as M,r as pt,s as K}from"../chunks/CByCw1PR.js";import{i as ct}from"../chunks/DQn_j9mP.js";import{p as ut,o as _t,t as $,c as l,g as t,a as dt,s,e as p,m as Q,r as o,n as A,i as mt,b as vt}from"../chunks/B8AwEteH.js";import{e as X,i as Z}from"../chunks/CJ-sz3_q.js";import{s as N,r as d,p as bt,n as ft}from"../chunks/CcgC1GVn.js";import{c as gt,s as ht}from"../chunks/BiSFzz5Z.js";import{a as m,s as yt,t as xt,b as wt}from"../chunks/_T73ulCF.js";import{b as kt,c as jt,p as Dt}from"../chunks/NmcOIudT.js";import{g as Et}from"../chunks/CtK6S781.js";import{p as Lt}from"../chunks/CEVJ7K31.js";import{n as St}from"../chunks/BjUY3Dog.js";var Tt=P("<option> </option>"),qt=P('<li><input type="radio" class="post-type-job__input" required/> <label> </label></li>'),Mt=P('<main class="main"><div class="wrapper"><div class="post"><header class="post__head"><h1 class="post__title">Postar Vaga</h1></header> <div class="post__body"><form method="POST" target="_self" class="post__cell post__cell--main"><h4 class="post__legend">Sobre a Empresa</h4> <ul class="post-form"><li><label class="post-form__label">Nome da empresa:</label> <input type="text" placeholder="Ex.: Blockstream" class="input input--full post-form__input"/></li> <li><label class="post-form__label">Site da empresa:</label> <input type="url" placeholder="https://example.com" class="input input--full post-form__input"/></li> <li><label class="post-form__label">Logo:</label> <input type="url" placeholder="https://example.com/image.jpg" class="input input--full post-form__input"/> <div class="post-form__help">Optional: URL to an image with the company logo em 200x200.</div></li></ul> <h4 class="post__legend">Sobre a Vaga</h4> <ul class="post-form"><li><label class="post-form__label">Título da vaga<strong>*</strong>:</label> <input type="text" placeholder="Ex.: Desenvolvedor Nostr" class="input input--full post-form__input" required/></li>  <li><label class="post-form__label">Local<strong>*</strong>:</label> <input type="text" placeholder="Remoto ou em local específico" class="input input--full post-form__input" required/></li> <li><label class="post-form__label">Categoria<strong>*</strong>:</label> <select required class="input input--full post-form__input"><option disabled selected hidden>Escolha uma opção...</option><!></select></li> <li><label class="post-form__label">Tipo da vaga<strong>*</strong>:</label> <div class="post-form__input"><ul class="post-type-job"></ul></div></li> <li><label for="description" class="post-form__label">Descrição da vaga<strong>*</strong>:</label> <textarea id="description" placeholder="Descrição da vaga" class="textarea textarea--full" required></textarea></li> <li><label class="post-form__label">Link ou e-mail:</label> <input type="text" placeholder="Insira um e-mail ou link de aplicação" pattern="^((https?:\\/\\/)[^\\s]+|[^\\s@]+@[^\\s@]+\\.[^\\s@]+)$" title="Digite um e-mail válido, URI mailto, ou URL (ex: voce@exemplo.com, mailto:voce@exemplo.com, ou https://seuportfólio.com)" class="input input--full post-form__input"/></li></ul> <div class="post-action"><button type="submit" name="submit" class="post-action__btn btn btn--primary">Enviar</button></div></form> <div class="post__cell post__cell--aside"></div></div></div></div></main>');function Bt(tt,at){ut(at,!1);const et=[];let b;const ot=St.subscribe(e=>{b=e});let a=Q({}),c=Q({});const lt=async()=>{if(!b)return alert("You need to be logged in.");if(!window.nostr)return alert("Nostr extension not found.");const e=b.pubkey,i=Math.floor(Date.now()/1e3),r="abcdefghijklmnopqrstuvwxyz0123456789",n=Array(12).fill(0).map(()=>r.charAt(Math.floor(Math.random()*r.length))).join(""),u=new Date;u.setDate(u.getDate()+90);const v=Math.floor(u.getTime()/1e3);p(a,t(a).description=Lt.sanitize(t(a).description)),p(a,t(a).publishedAt=String(i));const q={content:JSON.stringify({job:t(a),company:t(c)}),created_at:i,pubkey:e,kind:30600,tags:[["d",`${yt(t(a).title)}-${n}`],["t","Job"],["t","Work"],["t","Employment"],["t",t(a).category],["t",xt(t(a).contractType)],["expiration",String(v)]]};try{const _=await window.nostr.signEvent(q);await Promise.any(bt(_)),vt(a,{});const it=ft.naddrEncode({kind:_.kind,pubkey:_.pubkey,identifier:_.tags.find(rt=>rt[0]==="d")[1]});Et(`/jobs/${it}`)}catch(_){console.log(_)}};_t(()=>()=>ot()),ct();var f=Mt(),R=l(f),J=l(R),O=s(l(J),2),g=l(O),h=s(l(g),2),y=l(h),U=s(l(y),2);d(U),o(y);var x=s(y,2),z=s(l(x),2);d(z),o(x);var I=s(x,2),V=s(l(I),2);d(V),A(2),o(I),o(h);var B=s(h,4),w=l(B),C=s(l(w),2);d(C),o(w);var k=s(w,2),H=s(l(k),2);d(H),o(k);var j=s(k,2),D=s(l(j),2);$(()=>{t(a),mt(()=>{})});var E=l(D);E.value=E.__value="";var st=s(E);X(st,1,()=>jt,Z,(e,i)=>{var r=Tt(),n={},u=l(r,!0);o(r),$(()=>{n!==(n=t(i).value)&&(r.value=(r.__value=t(i).value)??""),K(u,t(i).title)}),M(e,r)}),o(D),o(j);var L=s(j,2),W=s(l(L),2),Y=l(W);X(Y,5,()=>gt,Z,(e,i)=>{var r=qt(),n=l(r);d(n);var u,v=s(n,2),q=l(v,!0);o(v),o(r),$(()=>{N(n,"id",t(i).value),u!==(u=t(i).value)&&(n.value=(n.__value=t(i).value)??""),N(v,"for",t(i).value),ht(v,1,`post-type-job__label badge badge--${t(i).value}`),K(q,t(i).title)}),wt(et,[],n,()=>(t(i).value,t(a).contractType),_=>p(a,t(a).contractType=_)),M(e,r)}),o(Y),o(W),o(L);var S=s(L,2),T=s(l(S),2);pt(T),N(T,"rows",8),o(S);var F=s(S,2),G=s(l(F),2);d(G),o(F),o(B),A(2),o(g),A(2),o(O),o(J),o(R),o(f),m(U,()=>t(c).name,e=>p(c,t(c).name=e)),m(z,()=>t(c).website,e=>p(c,t(c).website=e)),m(V,()=>t(c).image,e=>p(c,t(c).image=e)),m(C,()=>t(a).title,e=>p(a,t(a).title=e)),m(H,()=>t(a).location,e=>p(a,t(a).location=e)),kt(D,()=>t(a).category,e=>p(a,t(a).category=e)),m(T,()=>t(a).description,e=>p(a,t(a).description=e)),m(G,()=>t(a).applyLink,e=>p(a,t(a).applyLink=e)),nt("submit",g,Dt(lt)),M(tt,f),dt()}export{Bt as component};
